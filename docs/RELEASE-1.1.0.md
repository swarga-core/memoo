# Release 1.1.0 Specification

## Overview

Улучшение навигации между вкладками и добавление настроек редактора.

## Features

### 1. Убрать кнопки закрытия с табов

**Текущее поведение:** На каждом табе есть кнопка ✕ для закрытия.

**Новое поведение:** Кнопки закрытия убраны. Закрытие вкладки через:
- Контекстное меню (правый клик → Close)
- ⌘+W

### 2. Переключение вкладок через Tab/Shift+Tab

**Новое поведение:**
- `Tab` — следующая вкладка (циклически)
- `Shift+Tab` — предыдущая вкладка (циклически)
- Существующие ⌘+] и ⌘+[ продолжают работать

**Примечание:** Tab переключает вкладки везде, включая редактор. Табуляция в тексте не вставляется — это scratch pad, не код.

### 3. Быстрый доступ к первым 5 вкладкам

**Новое поведение:**
- `⌘+1` — первая вкладка
- `⌘+2` — вторая вкладка
- ...
- `⌘+5` — пятая вкладка

**Отображение:** Первые 5 вкладок показывают номер в заголовке:
- `1: Meeting Notes`
- `2: TODO`
- `3: Scratch`

Номер нельзя удалить при редактировании — он добавляется автоматически.

### 4. Окно настроек

**Содержимое:**
- **Font Family** — выбор шрифта (системный моноширинный, SF Pro, Monaco, Menlo и т.д.)
- **Font Size** — размер шрифта (slider или stepper, 10-24pt)

**Доступ:**
- Menu bar → Settings
- ⌘+,

**Сохранение:** UserDefaults, применяется сразу.

---

## Work Plan

### Phase 1: Tab Close Button Removal
- [ ] Удалить кнопку ✕ из `TabItemView.swift`
- [ ] Проверить что контекстное меню и ⌘+W работают

### Phase 2: Tab/Shift+Tab Navigation
- [ ] Добавить key handler для Tab/Shift+Tab в `FloatingPanel` или `MainContentView`
- [ ] Реализовать `selectNextTab()` и `selectPreviousTab()` в `NotesViewModel`
- [ ] Убедиться что Tab в редакторе вставляет табуляцию (не переключает вкладку)

### Phase 3: ⌘+1-5 Shortcuts
- [ ] Добавить keyboard shortcuts ⌘+1 до ⌘+5
- [ ] Модифицировать отображение заголовка в `TabItemView` для первых 5 вкладок
- [ ] При переименовании — сохранять только текст после "N: "

### Phase 4: Settings Window
- [ ] Создать `EditorSettings` модель (ObservableObject или @Observable с UserDefaults)
- [ ] Создать/обновить `SettingsView` с выбором шрифта и размера
- [ ] Применить настройки в `NoteEditorView`

### Phase 5: Testing
- [ ] Ручное тестирование всех сценариев
- [ ] Проверить что существующие тесты проходят
- [ ] Добавить тесты для новой функциональности

---

## Test Cases

### Tab Navigation
- [ ] Tab переключает на следующую вкладку
- [ ] Shift+Tab переключает на предыдущую вкладку
- [ ] На последней вкладке Tab переходит на первую
- [ ] На первой вкладке Shift+Tab переходит на последнюю
- [ ] Tab переключает вкладки даже когда фокус в редакторе

### Quick Access (⌘+1-5)
- [ ] ⌘+1 открывает первую вкладку
- [ ] ⌘+5 открывает пятую вкладку (если есть)
- [ ] ⌘+5 при 3 вкладках — ничего не происходит
- [ ] Заголовки первых 5 вкладок показывают номер
- [ ] При переименовании номер сохраняется

### Settings
- [ ] Изменение шрифта применяется сразу
- [ ] Изменение размера применяется сразу
- [ ] Настройки сохраняются между запусками
- [ ] Settings открывается через ⌘+,

### Close Tab
- [ ] Кнопка ✕ отсутствует на табах
- [ ] Контекстное меню → Close работает
- [ ] ⌘+W закрывает текущую вкладку
